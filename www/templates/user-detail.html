<ion-view hide-nav-bar="true">
  <ion-header-bar align-title="center" class="bar-light">
      <div class="h1 title">{{user.name}}</div>
    </div>
  </ion-header-bar>
  <ion-content class="ionic-body active-preview">
    <form name='userInfo' class="list">
      <label class="item item-input item-stacked-label">
        <span class="input-label">姓名</span>
        <input type="text" name='username' placeholder="莹莹" ng-model="user.name" ng-minlength="1" ng-maxlength="32" ng-required="true">
      </label>
      <label class="item item-input item-stacked-label">
        <span class="input-label">手机</span>
        <input type="tel" name='mobile' placeholder="15890198396" ng-model="user.mobile" ng-pattern="/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/" ng-required="true" requird>
      </label>
      <div class="item item-input item-stacked-label">
        <span class="input-label">生日</span>
        <input readonly="readonly"  type="text" clase="whiteback" ng-click='nativedatepicker()' ng-model="user.birthday" />
      </div>
      <label ng-if="user.id==-1" class="item item-input item-stacked-label">
        <span class="input-label">充值金额</span>
        <input type="number" name='blance' placeholder=1000 ng-model="user.balance" ng-required="true" required>
      </label>
      <button type="button" class="button button-outline button-block button-balanced" ng-disabled="userInfo.$invalid" ng-click="save()">保存</button>
    </form>

    <div ng-if="user.id!=-1 && user.records && user.records.length>0 && user.sum" class="list card">
      <div class="item item-divider">充值总计:{{user.sum}} 元</div>
      <div class="item item-body">
        <ion-list>
          <ion-item class="item-remove-animate item-avatar" ng-repeat="record in user.records" type="item-text-wrap">
            <img ng-src="img/{{user.id%94}}.jpg">
            <p ng-if="record.inOut">充值：{{record.amount}} 元</p>
            <p ng-if="!record.inOut">消费：{{record.amount}} 元</p>
            <p>时间：{{record.inDate}}</p>
          </ion-item>
        </ion-list>
      </div>
    </div>

  </ion-content>
</ion-view>